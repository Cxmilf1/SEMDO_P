{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4" style="font-size: 28px;"> Historial de Envío de Facturas</h2>
    <p class="text-muted">A continuación se listan las facturas enviadas exitosamente.</p>

    <div style="overflow-x: auto; margin-top: 30px; margin-left: 30px; margin-right: 30px;">
        <table style="width: 100%; border-collapse: collapse; background-color: #1E2A38; color: white;">
            <thead>
                <tr style="background-color: #27384D;">
                    <th style="padding: 12px; text-align: left;">#</th>
                    <th style="padding: 12px; text-align: left;">Número de Factura</th>
                    <th style="padding: 12px; text-align: left;">Cliente</th>
                    <th style="padding: 12px; text-align: left;">Email</th>
                    <th style="padding: 12px; text-align: left;">Fecha de Envío</th>
                    <th style="padding: 12px; text-align: left;">Estado</th>
                </tr>
            </thead>
            <tbody>
                {% for envio in envios %}
                <tr style="border-top: 1px solid #2F3E54;">
                    <td style="padding: 10px;">{{ forloop.counter }}</td>
                    <td style="padding: 10px;">{{ envio.factura.numero_factura }}</td>
                    <td style="padding: 10px;">{{ envio.factura.id_receptor.id_persona.nombre }}</td>
                    <td style="padding: 10px;">{{ envio.factura.id_receptor.id_persona.email }}</td>
                    <td style="padding: 10px;">{{ envio.fecha_envio|date:"d M Y H:i" }}</td>
                    <td style="padding: 10px;">
                        <span style="display: inline-block; background-color: #28a745; color: white; 
                                     padding: 4px 10px; border-radius: 10px; font-size: 13px;">
                            Enviado
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="padding: 20px; text-align: center; color: #bbb;">
                        No hay envíos registrados.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
